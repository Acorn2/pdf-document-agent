# PDFæ–‡çŒ®åˆ†ææ™ºèƒ½ä½“é¡¹ç›®å¼€å‘æ­¥éª¤æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æŒ‡å—æä¾›åŸºäºLangChainè‡ªæ„å»ºPDFæ–‡çŒ®åˆ†ææ™ºèƒ½ä½“çš„å®Œæ•´å¼€å‘æ­¥éª¤ï¼ŒåŒ…æ‹¬æŠ€æœ¯éš¾åº¦åˆ†æã€å®æ–½è·¯çº¿å’Œæœ€ä½³å®è·µã€‚

## ğŸš€ å®æ“å¼€å‘æ­¥éª¤æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–ï¼ˆä¸éœ€è¦å…‹éš†LangChainï¼‰

**é‡è¦è¯´æ˜ï¼šæ‚¨ä¸éœ€è¦å…‹éš†LangChainçš„GitHubé¡¹ç›®**ï¼Œè€Œæ˜¯åº”è¯¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„é¡¹ç›®ï¼Œç„¶åé€šè¿‡pipå®‰è£…LangChainä½œä¸ºä¾èµ–åŒ…ã€‚

#### 1.1 åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„

```bash
# 1. åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•
mkdir pdf-document-agent
cd pdf-document-agent

# 2. åˆ›å»ºå®Œæ•´çš„ç›®å½•ç»“æ„
mkdir -p {app,tests,docs,uploads,vector_db,logs}
mkdir -p app/{core,api,models,utils}
mkdir -p frontend/{src,public,components}
mkdir -p config
```

#### 1.2 é¡¹ç›®ç›®å½•è¯´æ˜

```
pdf-document-agent/
â”œâ”€â”€ app/                    # åç«¯åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ frontend/              # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ components/
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ uploads/               # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ vector_db/             # å‘é‡æ•°æ®åº“å­˜å‚¨
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ docker-compose.yml     # Dockerç¼–æ’
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

### ç¬¬äºŒæ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–å®‰è£…

#### 2.1 Pythonè™šæ‹Ÿç¯å¢ƒè®¾ç½®

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source venv/bin/activate
# Windows:
# venv\Scripts\activate

# 3. å‡çº§pip
pip install --upgrade pip
```

#### 2.2 ä¾èµ–åŒ…å®‰è£…

```bash
# 1. åˆ›å»ºrequirements.txt
cat > requirements.txt << EOF
# åç«¯æ¡†æ¶
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6

# æ•°æ®åº“
sqlalchemy==2.0.23
psycopg2-binary==2.9.9
alembic==1.12.1

# ä»»åŠ¡é˜Ÿåˆ—
celery==5.3.4
redis==5.0.1

# LangChainç›¸å…³
langchain==0.0.335
langchain-community==0.0.6
langchain-openai==0.0.2
chromadb==0.4.17
openai==1.3.5

# æ–‡æ¡£å¤„ç†
PyMuPDF==1.23.8
pypdf==3.17.1
python-docx==1.1.0

# å·¥å…·åº“
pydantic==2.5.0
python-dotenv==1.0.0
httpx==0.25.2
numpy==1.24.3
tiktoken==0.5.1

# å¼€å‘å·¥å…·
pytest==7.4.3
pytest-asyncio==0.21.1
black==23.11.0
EOF

# 2. å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

#### 2.3 ç¯å¢ƒå˜é‡é…ç½®

```bash
# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cat > .env.example << EOF
# OpenAIé…ç½®
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://postgres:password@localhost:5432/document_analysis

# Redisé…ç½®ï¼ˆç”¨äºCeleryï¼‰
REDIS_URL=redis://localhost:6379/0

# æ–‡ä»¶ä¸Šä¼ é…ç½®
MAX_FILE_SIZE=50MB
UPLOAD_DIRECTORY=./uploads
VECTOR_DB_DIRECTORY=./vector_db

# APIé…ç½®
API_HOST=0.0.0.0
API_PORT=8000
EOF

# å¤åˆ¶ä¸ºå®é™…é…ç½®æ–‡ä»¶
cp .env.example .env
# ç„¶åç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥çœŸå®çš„é…ç½®ä¿¡æ¯
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ†é˜¶æ®µå¼€å‘ç­–ç•¥

#### é˜¶æ®µ1ï¼šæ ¸å¿ƒåŠŸèƒ½æœ€å°å¯è¡Œç‰ˆæœ¬ï¼ˆMVPï¼‰

##### 3.1 åˆ›å»ºåŸºç¡€æ–‡ä»¶ç»“æ„

```bash
# åˆ›å»ºæ ¸å¿ƒæ¨¡å—æ–‡ä»¶
touch app/__init__.py
touch app/document_processor.py    # PDFå¤„ç†æ ¸å¿ƒ
touch app/vector_store.py         # å‘é‡å­˜å‚¨ç®¡ç†
touch app/agent_core.py           # æ™ºèƒ½ä½“æ ¸å¿ƒé€»è¾‘
touch app/models.py               # æ•°æ®æ¨¡å‹å®šä¹‰
touch app/main.py                 # FastAPIåº”ç”¨å…¥å£
```

##### 3.2 å®ç°æ ¸å¿ƒç»„ä»¶

**app/document_processor.py** - ä»æ–‡æ¡£ä¸­å¤åˆ¶å®Œæ•´å®ç°
**app/vector_store.py** - ä»æ–‡æ¡£ä¸­å¤åˆ¶å®Œæ•´å®ç°
**app/agent_core.py** - ä»æ–‡æ¡£ä¸­å¤åˆ¶å®Œæ•´å®ç°

##### 3.3 åˆ›å»ºç®€å•çš„APIæ¥å£

```python
# app/main.py - åŸºç¡€ç‰ˆæœ¬
from fastapi import FastAPI, File, UploadFile
from .document_processor import DocumentProcessor
from .vector_store import VectorStoreManager
from .agent_core import DocumentAnalysisAgent

app = FastAPI(title="PDFæ–‡çŒ®åˆ†ææ™ºèƒ½ä½“")

# åˆå§‹åŒ–ç»„ä»¶
processor = DocumentProcessor()
vector_store = VectorStoreManager()
agent = DocumentAnalysisAgent(vector_store_manager=vector_store)

@app.post("/upload")
async def upload_document(file: UploadFile = File(...)):
    # ç®€åŒ–çš„ä¸Šä¼ å¤„ç†é€»è¾‘
    pass

@app.post("/query")
async def query_document(document_id: str, question: str):
    # ç®€åŒ–çš„æŸ¥è¯¢é€»è¾‘
    pass
```

#### é˜¶æ®µ2ï¼šå®Œå–„APIæ¥å£å’Œæ•°æ®åº“

##### 3.4 æ•°æ®åº“é…ç½®

```bash
# åˆ›å»ºæ•°æ®åº“é…ç½®æ–‡ä»¶
touch app/database.py
touch app/schemas.py

# åˆ›å»ºAlembicè¿ç§»é…ç½®
alembic init migrations
```

##### 3.5 å®ç°å®Œæ•´çš„APIæ¥å£

ä»æ–‡æ¡£ä¸­å¤åˆ¶å®Œæ•´çš„APIå®ç°åˆ° `app/api.py`

#### é˜¶æ®µ3ï¼šå‰ç«¯ç•Œé¢å¼€å‘ï¼ˆå¯é€‰ï¼‰

```bash
# å¦‚æœé€‰æ‹©å¼€å‘å‰ç«¯ç•Œé¢
cd frontend
npm init vue@latest .
npm install
npm install axios
```

### ç¬¬å››æ­¥ï¼šæ•°æ®åº“å’Œä¸­é—´ä»¶å‡†å¤‡

#### 4.1 ä½¿ç”¨Dockerå¿«é€Ÿå¯åŠ¨ä¾èµ–æœåŠ¡

```bash
# åˆ›å»ºå¼€å‘ç¯å¢ƒçš„Docker Composeæ–‡ä»¶
cat > docker-compose.dev.yml << EOF
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: document_analysis
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    restart: unless-stopped

  # pgAdminï¼ˆå¯é€‰çš„æ•°æ®åº“ç®¡ç†ç•Œé¢ï¼‰
  pgadmin:
    image: dpage/pgadmin4
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@example.com
      PGADMIN_DEFAULT_PASSWORD: admin
    ports:
      - "5050:80"
    depends_on:
      - postgres

volumes:
  postgres_data:
EOF

# å¯åŠ¨ä¾èµ–æœåŠ¡
docker-compose -f docker-compose.dev.yml up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.dev.yml ps
```

#### 4.2 æ•°æ®åº“åˆå§‹åŒ–

```bash
# åˆ›å»ºæ•°æ®åº“è¿ç§»
alembic revision --autogenerate -m "Initial migration"

# æ‰§è¡Œè¿ç§»
alembic upgrade head
```

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•å’Œè°ƒè¯•

#### 5.1 å•å…ƒæµ‹è¯•

```bash
# åˆ›å»ºæµ‹è¯•ç›®å½•ç»“æ„
mkdir -p tests/{unit,integration}
touch tests/__init__.py
touch tests/unit/test_document_processor.py
touch tests/unit/test_vector_store.py
touch tests/unit/test_agent_core.py
```

#### 5.2 è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/unit/test_document_processor.py -v
```

## ğŸ¯ æŠ€æœ¯å®ç°éš¾åº¦åˆ†æ

### éš¾åº¦ç­‰çº§è¯´æ˜

| ç­‰çº§ | ç¬¦å· | è¯´æ˜ |
|------|------|------|
| ç®€å• | â­â­â˜†â˜†â˜† | åŸºç¡€PythonçŸ¥è¯†å³å¯ |
| ä¸­ç­‰ | â­â­â­â˜†â˜† | éœ€è¦æ¡†æ¶å’Œåº“çš„å­¦ä¹  |
| å›°éš¾ | â­â­â­â­â˜† | éœ€è¦æ·±å…¥ç†è§£å’Œç»éªŒ |
| ä¸“å®¶ | â­â­â­â­â­ | éœ€è¦ç³»ç»Ÿæ€§çŸ¥è¯†å’Œè°ƒä¼˜ |

### ä½éš¾åº¦ç»„ä»¶ (â­â­â˜†â˜†â˜†)

#### 1. FastAPIåŸºç¡€APIå¼€å‘
- **å­¦ä¹ æˆæœ¬**ï¼š1-2å¤©
- **ä¸»è¦æŠ€èƒ½**ï¼šPythonåŸºç¡€ + HTTPåè®®ç†è§£
- **å…³é”®ç‚¹**ï¼š
  - è·¯ç”±å®šä¹‰å’Œå‚æ•°å¤„ç†
  - è¯·æ±‚/å“åº”æ¨¡å‹å®šä¹‰
  - è‡ªåŠ¨APIæ–‡æ¡£ç”Ÿæˆ

#### 2. æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **å­¦ä¹ æˆæœ¬**ï¼šåŠå¤©
- **ä¸»è¦æŠ€èƒ½**ï¼šPythonæ–‡ä»¶æ“ä½œ
- **å…³é”®ç‚¹**ï¼š
  - æ–‡ä»¶éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
  - ä¸´æ—¶æ–‡ä»¶å¤„ç†
  - é”™è¯¯å¤„ç†æœºåˆ¶

#### 3. åŸºç¡€PDFæ–‡æœ¬æå–
- **å­¦ä¹ æˆæœ¬**ï¼š1å¤©
- **ä¸»è¦æŠ€èƒ½**ï¼šPyMuPDFåº“ä½¿ç”¨
- **å…³é”®ç‚¹**ï¼š
  - PDFæ ¼å¼å…¼å®¹æ€§å¤„ç†
  - æ–‡æœ¬æ¸…ç†å’Œé¢„å¤„ç†
  - å…ƒæ•°æ®æå–

### ä¸­ç­‰éš¾åº¦ç»„ä»¶ (â­â­â­â˜†â˜†)

#### 1. å‘é‡å­˜å‚¨ç®¡ç†
- **å­¦ä¹ æˆæœ¬**ï¼š3-5å¤©
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - å‘é‡åµŒå…¥(Embedding)æ¦‚å¿µç†è§£
  - ChromaDB APIä½¿ç”¨
  - ç›¸ä¼¼åº¦æ£€ç´¢ç®—æ³•
- **å…³é”®ç‚¹**ï¼š
  - åµŒå…¥æ¨¡å‹é€‰æ‹©å’Œé…ç½®
  - å‘é‡ç´¢å¼•ä¼˜åŒ–
  - æ£€ç´¢ç»“æœæ’åºå’Œè¿‡æ»¤

#### 2. LangChainé›†æˆ
- **å­¦ä¹ æˆæœ¬**ï¼š5-7å¤©
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - LangChainæ¡†æ¶ç†è§£
  - æç¤ºè¯å·¥ç¨‹æŠ€å·§
  - é“¾å¼è°ƒç”¨é€»è¾‘
- **å…³é”®ç‚¹**ï¼š
  - ç»„ä»¶ç»„åˆå’Œé…ç½®
  - å†…å­˜ç®¡ç†å’Œä¸Šä¸‹æ–‡ç»´æŠ¤
  - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

#### 3. å¼‚æ­¥ä»»åŠ¡å¤„ç†
- **å­¦ä¹ æˆæœ¬**ï¼š3-5å¤©
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - Celeryä»»åŠ¡é˜Ÿåˆ—
  - Redisæ¶ˆæ¯ä»£ç†
  - å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼
- **å…³é”®ç‚¹**ï¼š
  - ä»»åŠ¡çŠ¶æ€ç®¡ç†
  - é”™è¯¯é‡è¯•ç­–ç•¥
  - æ€§èƒ½ç›‘æ§

### é«˜éš¾åº¦ç»„ä»¶ (â­â­â­â­â˜†)

#### 1. æ™ºèƒ½ä½“å¯¹è¯é€»è¾‘
- **å­¦ä¹ æˆæœ¬**ï¼š1-2å‘¨
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - è‡ªç„¶è¯­è¨€å¤„ç†ç†è§£
  - å¯¹è¯ç®¡ç†ç³»ç»Ÿ
  - ä¸Šä¸‹æ–‡çŠ¶æ€æœºè®¾è®¡
- **å…³é”®ç‚¹**ï¼š
  - å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†
  - æ„å›¾è¯†åˆ«å’Œåˆ†ç±»
  - åŠ¨æ€æç¤ºè¯ç”Ÿæˆ

#### 2. æ€§èƒ½ä¼˜åŒ–
- **å­¦ä¹ æˆæœ¬**ï¼š1-2å‘¨
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - ç³»ç»Ÿæ€§èƒ½åˆ†æ
  - ç¼“å­˜ç­–ç•¥è®¾è®¡
  - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- **å…³é”®ç‚¹**ï¼š
  - å‘é‡æ£€ç´¢æ€§èƒ½ä¼˜åŒ–
  - å†…å­˜ä½¿ç”¨ä¼˜åŒ–
  - å¹¶å‘å¤„ç†ä¼˜åŒ–

#### 3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- **å­¦ä¹ æˆæœ¬**ï¼š1-2å‘¨
- **ä¸»è¦æŠ€èƒ½**ï¼š
  - Dockerå®¹å™¨åŒ–æŠ€æœ¯
  - è´Ÿè½½å‡è¡¡é…ç½®
  - ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- **å…³é”®ç‚¹**ï¼š
  - æœåŠ¡ç¼–æ’å’Œæ‰©ç¼©å®¹
  - å®‰å…¨æ€§é…ç½®
  - æ•…éšœæ¢å¤æœºåˆ¶

## ğŸ“Š å¼€å‘æ—¶é—´ä¼°ç®—

### åŸºäºä¸åŒç»éªŒæ°´å¹³çš„æ—¶é—´ä¼°ç®—

| å¼€å‘é˜¶æ®µ | åˆçº§å¼€å‘è€… | ä¸­çº§å¼€å‘è€… | é«˜çº§å¼€å‘è€… | æŠ€èƒ½è¦æ±‚ |
|----------|------------|------------|------------|----------|
| ç¯å¢ƒæ­å»º | 1-2å¤© | åŠå¤© | 2-3å°æ—¶ | åŸºç¡€ç¯å¢ƒé…ç½® |
| MVPç‰ˆæœ¬ | 2-3å‘¨ | 1-2å‘¨ | 1å‘¨ | Python + FastAPI |
| å®Œæ•´åç«¯ | 6-8å‘¨ | 3-4å‘¨ | 2-3å‘¨ | ä¸Šè¿° + LangChain + æ•°æ®åº“ |
| å‰ç«¯ç•Œé¢ | 3-4å‘¨ | 1-2å‘¨ | 1å‘¨ | Vue.js/React |
| æµ‹è¯•ä¼˜åŒ– | 2-3å‘¨ | 1-2å‘¨ | 1å‘¨ | æµ‹è¯•æ¡†æ¶ + æ€§èƒ½ä¼˜åŒ– |
| ç”Ÿäº§éƒ¨ç½² | 2-3å‘¨ | 1å‘¨ | 3-5å¤© | Docker + DevOps |
| **æ€»è®¡** | **16-22å‘¨** | **8-12å‘¨** | **5-8å‘¨** | å…¨æ ˆå¼€å‘èƒ½åŠ› |

### é‡Œç¨‹ç¢‘æ—¶é—´ç‚¹

```mermaid
gantt
    title é¡¹ç›®å¼€å‘æ—¶é—´çº¿
    dateFormat  YYYY-MM-DD
    section å‡†å¤‡é˜¶æ®µ
    ç¯å¢ƒæ­å»º           :done, setup, 2024-01-01, 2024-01-03
    éœ€æ±‚åˆ†æ           :done, analysis, 2024-01-03, 2024-01-05
    
    section å¼€å‘é˜¶æ®µ
    MVPå¼€å‘            :active, mvp, 2024-01-05, 2024-01-19
    åç«¯å®Œå–„           :backend, 2024-01-19, 2024-02-16
    å‰ç«¯å¼€å‘           :frontend, 2024-02-16, 2024-03-01
    
    section æµ‹è¯•é˜¶æ®µ
    åŠŸèƒ½æµ‹è¯•           :testing, 2024-03-01, 2024-03-08
    æ€§èƒ½ä¼˜åŒ–           :optimize, 2024-03-08, 2024-03-15
    
    section éƒ¨ç½²é˜¶æ®µ
    ç”Ÿäº§éƒ¨ç½²           :deploy, 2024-03-15, 2024-03-22
```

## ğŸ› ï¸ æ¨èå®æ–½è·¯çº¿

### è·¯çº¿1ï¼šå¿«é€ŸåŸå‹è·¯çº¿ï¼ˆé€‚åˆå­¦ä¹ éªŒè¯ï¼‰

**ç›®æ ‡**ï¼šå¿«é€ŸéªŒè¯æŠ€æœ¯å¯è¡Œæ€§
**é€‚ç”¨åœºæ™¯**ï¼šæ¦‚å¿µéªŒè¯ã€æŠ€æœ¯å­¦ä¹ ã€æ¼”ç¤ºå±•ç¤º

```mermaid
flowchart LR
    A[PDFæ–‡æœ¬æå–] --> B[å‘é‡å­˜å‚¨]
    B --> C[åŸºç¡€é—®ç­”]
    C --> D[ç®€å•API]
    D --> E[æµ‹è¯•éªŒè¯]
```

**å¼€å‘æ­¥éª¤**ï¼š
1. **ç¬¬1å¤©**ï¼šå®ç°PDFæ–‡æœ¬æå–åŠŸèƒ½
2. **ç¬¬2-3å¤©**ï¼šé›†æˆå‘é‡å­˜å‚¨ï¼ˆChromaï¼‰
3. **ç¬¬4-5å¤©**ï¼šå®ç°åŸºç¡€é—®ç­”é€»è¾‘
4. **ç¬¬6-7å¤©**ï¼šåˆ›å»ºç®€å•çš„APIæ¥å£
5. **ç¬¬8å¤©**ï¼šç«¯åˆ°ç«¯æµ‹è¯•å’Œè°ƒè¯•

**ä¼˜ç‚¹**ï¼š
- å¿«é€Ÿçœ‹åˆ°æ•ˆæœ
- æŠ€æœ¯é£é™©ä½
- å­¦ä¹ æˆæœ¬å°

**ç¼ºç‚¹**ï¼š
- åŠŸèƒ½æœ‰é™
- ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ
- æ‰©å±•æ€§å·®

### è·¯çº¿2ï¼šå®Œæ•´ç³»ç»Ÿè·¯çº¿ï¼ˆé€‚åˆç”Ÿäº§ä½¿ç”¨ï¼‰

**ç›®æ ‡**ï¼šæ„å»ºå®Œæ•´çš„ç”Ÿäº§çº§ç³»ç»Ÿ
**é€‚ç”¨åœºæ™¯**ï¼šæ­£å¼äº§å“å¼€å‘ã€å•†ä¸šåº”ç”¨

```mermaid
flowchart TD
    A[ç³»ç»Ÿè®¾è®¡] --> B[æ•°æ®åº“è®¾è®¡]
    B --> C[åç«¯APIå¼€å‘]
    C --> D[å‰ç«¯ç•Œé¢å¼€å‘]
    D --> E[é›†æˆæµ‹è¯•]
    E --> F[æ€§èƒ½ä¼˜åŒ–]
    F --> G[éƒ¨ç½²ä¸Šçº¿]
```

**å¼€å‘æ­¥éª¤**ï¼š
1. **ç¬¬1-2å‘¨**ï¼šç³»ç»Ÿæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹
2. **ç¬¬3-6å‘¨**ï¼šåç«¯APIå¼€å‘å’Œæµ‹è¯•
3. **ç¬¬7-9å‘¨**ï¼šå‰ç«¯ç•Œé¢å¼€å‘
4. **ç¬¬10-11å‘¨**ï¼šç³»ç»Ÿé›†æˆå’Œæµ‹è¯•
5. **ç¬¬12å‘¨**ï¼šæ€§èƒ½ä¼˜åŒ–å’Œéƒ¨ç½²

**ä¼˜ç‚¹**ï¼š
- åŠŸèƒ½å®Œæ•´
- å¯æ‰©å±•æ€§å¼º
- ç”Ÿäº§å°±ç»ª

**ç¼ºç‚¹**ï¼š
- å¼€å‘å‘¨æœŸé•¿
- æŠ€æœ¯å¤æ‚åº¦é«˜
- èµ„æºæŠ•å…¥å¤§

### è·¯çº¿3ï¼šæ¸è¿›å¼å¼€å‘è·¯çº¿ï¼ˆå¼ºçƒˆæ¨èï¼‰

**ç›®æ ‡**ï¼šå¹³è¡¡å¿«é€ŸéªŒè¯å’Œå®Œæ•´åŠŸèƒ½
**é€‚ç”¨åœºæ™¯**ï¼šå¤§å¤šæ•°é¡¹ç›®åœºæ™¯

```mermaid
flowchart LR
    subgraph "é˜¶æ®µ1: MVP"
        A1[æ ¸å¿ƒåŠŸèƒ½] --> A2[åŸºç¡€æµ‹è¯•]
    end
    
    subgraph "é˜¶æ®µ2: å®Œå–„"
        B1[APIæ¥å£] --> B2[æ•°æ®åº“]
    end
    
    subgraph "é˜¶æ®µ3: å¢å¼º"
        C1[ç”¨æˆ·ç•Œé¢] --> C2[æ€§èƒ½ä¼˜åŒ–]
    end
    
    subgraph "é˜¶æ®µ4: éƒ¨ç½²"
        D1[ç”Ÿäº§éƒ¨ç½²] --> D2[ç›‘æ§ç»´æŠ¤]
    end
    
    A2 --> B1
    B2 --> C1
    C2 --> D1
```

**è¯¦ç»†å®æ–½è®¡åˆ’**ï¼š

#### é˜¶æ®µ1ï¼šæ ¸å¿ƒåŠŸèƒ½MVPï¼ˆ1-2å‘¨ï¼‰
- [ ] PDFæ–‡æ¡£å¤„ç†å™¨å®ç°
- [ ] å‘é‡å­˜å‚¨åŸºç¡€åŠŸèƒ½
- [ ] ç®€å•é—®ç­”é€»è¾‘
- [ ] åŸºç¡€APIæ¥å£
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–

**éªŒæ”¶æ ‡å‡†**ï¼š
- èƒ½å¤Ÿä¸Šä¼ PDFå¹¶æå–æ–‡æœ¬
- èƒ½å¤Ÿå›ç­”åŸºäºæ–‡æ¡£çš„ç®€å•é—®é¢˜
- APIæ¥å£å¯æ­£å¸¸è°ƒç”¨

#### é˜¶æ®µ2ï¼šAPIå’Œæ•°æ®åº“å®Œå–„ï¼ˆ2-3å‘¨ï¼‰
- [ ] å®Œæ•´çš„RESTful API
- [ ] æ•°æ®åº“æ¨¡å‹è®¾è®¡
- [ ] å¼‚æ­¥ä»»åŠ¡å¤„ç†
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] APIæ–‡æ¡£ç”Ÿæˆ

**éªŒæ”¶æ ‡å‡†**ï¼š
- å®Œæ•´çš„CRUDæ“ä½œ
- ä»»åŠ¡çŠ¶æ€å¯è¿½è¸ª
- é”™è¯¯ä¿¡æ¯æ¸…æ™°
- APIæ–‡æ¡£å®Œæ•´

#### é˜¶æ®µ3ï¼šç”¨æˆ·ç•Œé¢å’Œä½“éªŒï¼ˆ1-2å‘¨ï¼‰
- [ ] å‰ç«¯ç•Œé¢å¼€å‘
- [ ] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
- [ ] é—®ç­”ç•Œé¢
- [ ] å“åº”å¼è®¾è®¡
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–

**éªŒæ”¶æ ‡å‡†**ï¼š
- ç•Œé¢å‹å¥½æ˜“ç”¨
- æ”¯æŒç§»åŠ¨ç«¯
- å®æ—¶çŠ¶æ€æ›´æ–°
- é”™è¯¯æç¤ºå®Œå–„

#### é˜¶æ®µ4ï¼šä¼˜åŒ–å’Œéƒ¨ç½²ï¼ˆ1-2å‘¨ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨æ€§åŠ å›º
- [ ] Dockerå®¹å™¨åŒ–
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ ] ç›‘æ§å’Œæ—¥å¿—

**éªŒæ”¶æ ‡å‡†**ï¼š
- å“åº”æ—¶é—´æ»¡è¶³è¦æ±‚
- å®‰å…¨æ£€æŸ¥é€šè¿‡
- éƒ¨ç½²è‡ªåŠ¨åŒ–
- ç›‘æ§å‘Šè­¦å®Œå–„

## ğŸ’¡ å…³é”®æˆåŠŸè¦ç´ 

### 1. æŠ€æœ¯å‡†å¤‡æ¸…å•

#### APIå¯†é’¥å’Œè´¦å·
- [ ] OpenAI APIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
- [ ] ç¡®è®¤APIé…é¢å’Œè®¡è´¹
- [ ] å¤‡ç”¨LLMæœåŠ¡ï¼ˆå¯é€‰ï¼‰

#### å¼€å‘ç¯å¢ƒ
- [ ] Python 3.9+ ç¯å¢ƒ
- [ ] Dockerå’ŒDocker Compose
- [ ] ä»£ç ç¼–è¾‘å™¨ï¼ˆVS Codeæ¨èï¼‰
- [ ] Gitç‰ˆæœ¬æ§åˆ¶

#### ç¬¬ä¸‰æ–¹æœåŠ¡
- [ ] PostgreSQLæ•°æ®åº“
- [ ] Redisç¼“å­˜æœåŠ¡
- [ ] äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¯é€‰ï¼‰

### 2. å¼€å‘æœ€ä½³å®è·µ

#### ä»£ç è´¨é‡
```bash
# ä»£ç æ ¼å¼åŒ–
black app/ tests/

# ç±»å‹æ£€æŸ¥
mypy app/

# ä»£ç è´¨é‡æ£€æŸ¥
flake8 app/

# å®‰å…¨æ£€æŸ¥
bandit -r app/
```

#### æµ‹è¯•ç­–ç•¥
```bash
# å•å…ƒæµ‹è¯•
pytest tests/unit/ -v --cov=app

# é›†æˆæµ‹è¯•
pytest tests/integration/ -v

# ç«¯åˆ°ç«¯æµ‹è¯•
pytest tests/e2e/ -v
```

#### æ–‡æ¡£ç»´æŠ¤
- [ ] APIæ–‡æ¡£ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- [ ] éƒ¨ç½²æ–‡æ¡£
- [ ] ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- [ ] å¼€å‘è€…æ–‡æ¡£

### 3. é£é™©é˜²æ§æªæ–½

#### æŠ€æœ¯é£é™©
| é£é™©ç‚¹ | å½±å“ç¨‹åº¦ | é˜²æ§æªæ–½ |
|--------|----------|----------|
| OpenAI APIé™åˆ¶ | é«˜ | é…ç½®å¤‡ç”¨LLMæœåŠ¡ |
| å‘é‡å­˜å‚¨æ€§èƒ½ | ä¸­ | æå‰æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ– |
| æ–‡ä»¶å¤„ç†å¤±è´¥ | ä¸­ | å®Œå–„é”™è¯¯å¤„ç†å’Œé‡è¯• |
| å†…å­˜ä½¿ç”¨è¿‡é«˜ | é«˜ | å®ç°æ–‡ä»¶å¤§å°é™åˆ¶å’Œåˆ†å—å¤„ç† |

#### è¿›åº¦é£é™©
| é£é™©ç‚¹ | å½±å“ç¨‹åº¦ | é˜²æ§æªæ–½ |
|--------|----------|----------|
| æŠ€æœ¯å­¦ä¹ æ›²çº¿ | ä¸­ | é¢„ç•™å­¦ä¹ æ—¶é—´ï¼Œåˆ†é˜¶æ®µå®æ–½ |
| ç¬¬ä¸‰æ–¹ä¾èµ–é—®é¢˜ | ä¸­ | ç‰ˆæœ¬é”å®šï¼Œå¤‡ç”¨æ–¹æ¡ˆ |
| æ€§èƒ½ä¼˜åŒ–è€—æ—¶ | é«˜ | æ—©æœŸæ€§èƒ½æµ‹è¯•ï¼Œæ¸è¿›ä¼˜åŒ– |

## ğŸ¯ å¿«é€Ÿå¼€å§‹æŒ‡å—

### æœ€å°åŒ–å¯åŠ¨ç‰ˆæœ¬ï¼ˆ30åˆ†é’Ÿå¿«é€Ÿä½“éªŒï¼‰

å¦‚æœæ‚¨æƒ³å¿«é€Ÿä½“éªŒæ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

```bash
# 1. åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir quick-pdf-agent && cd quick-pdf-agent

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # æˆ– venv\Scripts\activate (Windows)

# 3. å®‰è£…æ ¸å¿ƒä¾èµ–
pip install fastapi uvicorn langchain langchain-openai chromadb PyMuPDF python-multipart python-dotenv

# 4. åˆ›å»ºæœ€å°åŒ–åº”ç”¨
cat > main.py << 'EOF'
import os
from fastapi import FastAPI, File, UploadFile
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import Chroma
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.chat_models import ChatOpenAI
import fitz  # PyMuPDF
from dotenv import load_dotenv

load_dotenv()

app = FastAPI()
embeddings = OpenAIEmbeddings()
llm = ChatOpenAI()
text_splitter = RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=200)

@app.post("/upload")
async def upload_pdf(file: UploadFile = File(...)):
    # ä¿å­˜æ–‡ä»¶
    with open(f"temp_{file.filename}", "wb") as f:
        content = await file.read()
        f.write(content)
    
    # æå–æ–‡æœ¬
    doc = fitz.open(f"temp_{file.filename}")
    text = ""
    for page in doc:
        text += page.get_text()
    
    # åˆ†å—å¹¶åˆ›å»ºå‘é‡å­˜å‚¨
    chunks = text_splitter.split_text(text)
    vector_store = Chroma.from_texts(chunks, embeddings)
    
    return {"message": "æ–‡æ¡£ä¸Šä¼ æˆåŠŸ", "chunks": len(chunks)}

@app.post("/query")
async def query(question: str):
    # è¿™é‡Œéœ€è¦å®ç°æŸ¥è¯¢é€»è¾‘
    return {"answer": "åŠŸèƒ½å¼€å‘ä¸­..."}

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
EOF

# 5. åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
echo "OPENAI_API_KEY=your-api-key-here" > .env

# 6. è¿è¡Œåº”ç”¨
python main.py
```

### éªŒè¯å®‰è£…

è®¿é—® `http://localhost:8000/docs` æŸ¥çœ‹APIæ–‡æ¡£ï¼Œç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œã€‚

## ğŸ” æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ä¾èµ–å®‰è£…é—®é¢˜

**é—®é¢˜**ï¼špip install å¤±è´¥
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šå‡çº§pip
pip install --upgrade pip

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# è§£å†³æ–¹æ¡ˆ3ï¼šåˆ†åˆ«å®‰è£…
pip install fastapi uvicorn
pip install langchain langchain-openai
pip install chromadb
```

#### 2. OpenAI APIé—®é¢˜

**é—®é¢˜**ï¼šAPIå¯†é’¥æ— æ•ˆæˆ–é…é¢ä¸è¶³
```python
# æ£€æŸ¥APIå¯†é’¥
import openai
openai.api_key = "your-key"
try:
    response = openai.Completion.create(
        engine="text-davinci-003",
        prompt="Hello",
        max_tokens=5
    )
    print("APIå¯†é’¥æœ‰æ•ˆ")
except Exception as e:
    print(f"APIé—®é¢˜: {e}")
```

#### 3. æ•°æ®åº“è¿æ¥é—®é¢˜

**é—®é¢˜**ï¼šPostgreSQLè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.dev.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs postgres

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.dev.yml restart postgres
```

#### 4. æ–‡ä»¶æƒé™é—®é¢˜

**é—®é¢˜**ï¼šä¸Šä¼ ç›®å½•æ— å†™æƒé™
```bash
# åˆ›å»ºç›®å½•å¹¶è®¾ç½®æƒé™
mkdir -p uploads vector_db logs
chmod 755 uploads vector_db logs

# macOS/Linuxè®¾ç½®ç”¨æˆ·æƒé™
sudo chown -R $USER:$USER uploads vector_db logs
```

## ğŸ“š å­¦ä¹ èµ„æºæ¨è

### å®˜æ–¹æ–‡æ¡£
- [FastAPIå®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [LangChainå®˜æ–¹æ–‡æ¡£](https://python.langchain.com/)
- [ChromaDBæ–‡æ¡£](https://docs.trychroma.com/)
- [OpenAI APIæ–‡æ¡£](https://platform.openai.com/docs)

### æ•™ç¨‹å’Œç¤ºä¾‹
- [LangChain Cookbook](https://github.com/langchain-ai/langchain/tree/master/cookbook)
- [FastAPIæ•™ç¨‹åˆé›†](https://fastapi.tiangolo.com/tutorial/)
- [RAGç³»ç»Ÿæ„å»ºæŒ‡å—](https://python.langchain.com/docs/use_cases/question_answering)

### ç¤¾åŒºèµ„æº
- [LangChain Discordç¤¾åŒº](https://discord.gg/langchain)
- [FastAPI GitHubä»“åº“](https://github.com/tiangolo/fastapi)
- [Awesome LangChain](https://github.com/kyrolabs/awesome-langchain)

é€šè¿‡éµå¾ªè¿™ä¸ªè¯¦ç»†çš„å¼€å‘æ­¥éª¤æŒ‡å—ï¼Œæ‚¨å¯ä»¥ç³»ç»Ÿæ€§åœ°æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„PDFæ–‡çŒ®åˆ†ææ™ºèƒ½ä½“ç³»ç»Ÿã€‚å»ºè®®ä»æ¸è¿›å¼å¼€å‘è·¯çº¿å¼€å§‹ï¼Œè¿™æ ·å¯ä»¥åœ¨æ§åˆ¶é£é™©çš„åŒæ—¶ï¼Œå¾ªåºæ¸è¿›åœ°å®ç°æ‰€æœ‰åŠŸèƒ½ã€‚